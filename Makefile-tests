

TESTS = start-repro-auto 		\
		start-repro-manual		\
		start-services-auto		\
		start-services-manual 	\
		run-demos				\
		clean-demos				\

test-all: clean $(TESTS)

clean: $(addsuffix .clean, $(TESTS))

%.clean:
	rm -f .repro-log/$(basename $@).log

export REPRO_EXIT_AFTER_STARTUP=true
export REPRO_LOGGING_LEVEL=debug
export REPRO_LOGGING_OPTIONS=NO_APPEND NO_TIMESTAMPS

start-repro-auto:
	@REPRO_LOGGING_FILENAME=$@.log	\
	REPRO_SERVICES_STARTUP=auto		\
	make start-repro

start-repro-manual:
	@REPRO_LOGGING_FILENAME=$@.log	\
	REPRO_SERVICES_STARTUP=manual	\
	make start-repro

start-services-auto:
	@REPRO_LOGGING_FILENAME=$@.log	\
	REPRO_SERVICES_STARTUP=auto		\
	make start-services

start-services-manual:
	@REPRO_LOGGING_FILENAME=$@.log	\
	REPRO_SERVICES_STARTUP=manual	\
	make start-services

run-demos:
	@REPRO_LOGGING_FILENAME=$@.log	\
	make run-demos

clean-demos:
	@REPRO_LOGGING_FILENAME=$@.log	\
	make clean-demos
