
export REPRO_EXIT_AFTER_STARTUP=true
export REPRO_LOGGING_LEVEL=debug
export REPRO_LOGGING_OPTIONS=NO_APPEND NO_TIMESTAMPS

TESTS = start-repro-auto 		\
		start-repro-manual		\
		start-services-auto		\
		start-services-manual 	\
		run-demos				\
		clean-demos				\

all: clean-all test-all

test-all: clean-all $(addsuffix .test, $(TESTS))

clean-all: $(addsuffix .clean, $(TESTS))

%.clean:
	rm -f .repro-log/$(basename $@).log

%.log:
	rm -f .repro-log/$(basename $@).log


start-repro-auto.test:
	@REPRO_LOGGING_FILENAME=$(basename $@).log	\
	REPRO_SERVICES_STARTUP=auto		\
	make start-repro

start-repro-manual.test:
	@REPRO_LOGGING_FILENAME=$(basename $@).log	\
	REPRO_SERVICES_STARTUP=manual	\
	make start-repro

start-services-auto.test:
	@REPRO_LOGGING_FILENAME=$(basename $@).log	\
	REPRO_SERVICES_STARTUP=auto		\
	make start-services

start-services-manual.test:
	@REPRO_LOGGING_FILENAME=$(basename $@).log	\
	REPRO_SERVICES_STARTUP=manual	\
	make start-services

run-demos.test:
	@REPRO_LOGGING_FILENAME=$(basename $@).log	\
	make run-demos

clean-demos.test:
	@REPRO_LOGGING_FILENAME=$(basename $@).log	\
	make clean-demos
